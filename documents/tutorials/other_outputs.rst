Overview of Output Files
=========================

The following table lists the files generated during the reduction process.
The generation of FITS files is generally skipped if they already exist in the output directory,
whereas '.dat' files are overwritten regardless of their prior existence.

+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| **Output filename** [1]_         | **Shape** [2]_   | **Created during**         | **Description**                                      |
+==================================+==================+============================+======================================================+
|   {*FRAME ID*}_cp.fits           | (Npix, Npix)     | ``clean_pattern``          | Noise-subtracted detector image                      |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
|{*THAR*}_{*band*}_{*mmf*}.fits    | (Npix, Nord)     | ``calibrate_wavelength``   | Wavelength solution for each pixel                   |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| hotpix_{*band*}_{*mmf*}.fits     | (Npix, Nord)     | ``flatten``,               | Hot pixel mask extracted by apertures                |
+                                  +                  +                            +                                                      +
|                                  |                  | or ``apnormalize``,        |                                                      | 
+                                  +                  +                            +                                                      +
|                                  |                  | or ``apext_flatfield`` [3]_|                                                      |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
|{*FLAT*}_{*band*}_{*mmf*}.fits    | (Npix, Nord)     | ``flatten``                | Flat spectrum before wavelength allocation           |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| {*FRAME ID*}_fln_{*mmf*}.fits    | (Npix, Nord)     | ``apext_flatfield``        | Aperture-extracted and flat-fielded spectrum         |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| {*FRAME ID*}_flnhp_{*mmf*}.fits  | (Npix, Nord)     | ``apext_flatfield``        | Same as above, with hot-pixel mask applied           |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| n{*FLAT*}_{*band*}_{*mmf*}.fits  | (Npix, Nord)     | ``apext_flatfield``        | Aperture-extracted and flat-fielded FLAT spectrum    |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| wblaze_{*band*}_{*mmf*}.dat      | [4]_             | ``dispcor``                | Blaze function                                       |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| w{*FRAME NUMBER*}_{*mmf*}.dat    | [4]_             | ``dispcor``                | Wavelength allocated spectrum [5]_                   |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| nw{*FRAME NUMBER*}_{*mmf*}.dat   | [4]_             | ``normalize1D``            | Normalized spectrum [5]_                             |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+
| ncw{*FRAME NUMBER*}_{*mmf*}.dat  | [4]_             | ``normalize1D``            | Order-combined spectrum [5]_                         |
+----------------------------------+------------------+----------------------------+------------------------------------------------------+

.. rubric:: Footnotes

.. [1] {*band*}: y or h; {*mmf*}: m1 or m2; {*THAR*}, {*FLAT*}: IDs of Stream2D for ThAr and FLAT, respectively; {*FRAME ID*}: File name of the FITS file without the extension; {*FRAME NUMBER*}: A 5-digit number 

.. [2] Npix: number of pixels on one side of the detector; Nord: number of orders

.. [3] Generated by the function to which the hot pixel mask is first applied.  

.. [4] See :ref:`step2-3` and :ref:`step2-5` for the data format.  

.. [5] See also :doc:`./plot_spec`.  




